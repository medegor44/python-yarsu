### **Техническое задание: Разработка консольного интернет-магазина "ConsoleShop"**

**Цель проекта:** Разработать полнофункциональное консольное приложение интернет-магазина с самостоятельным проектированием схемы БД, использованием Microsoft SQL Server и созданием современного текстового интерфейса.

### **1. Технический стек**

1. **Язык программирования:** Python 3.8+
2. **База данных:** Microsoft SQL Server
3. **Консольный UI:** Библиотека `rich` для красивого форматирования
4. **Архитектура:** Чистый DB-API, без использования ORM

### **2. Задание**

#### **2.1. Проектирование базы данных**

Самостоятельно спроектировать схему БД, которая должна поддерживать следующий функционал:

**Обязательные сущности:**
- **Товары** (Products) - хранение информации о товарах
- **Категории товаров** (Categories) - иерархия категорий
- **Клиенты** (Customers) - регистрация и данные пользователей
- **Заказы** (Orders) - информация о заказах
- **Элементы заказа** (Order Items) - состав заказов

**Требования к схеме:**
- Связи между таблицами (один-ко-многим, многие-ко-многим)
- Ограничения целостности (PRIMARY KEY, FOREIGN KEY, UNIQUE, NOT NULL)
- Правильные типы данных для каждого поля
- Индексы для часто используемых полей

#### **2.2. Функциональные требования**

**Для клиентов:**
- ✓ Регистрация нового клиента
- ✓ Просмотр каталога товаров с фильтрацией по категориям
- ✓ Поиск товаров по названию
- ✓ Добавление товаров в корзину
- ✓ Оформление заказа
- ✓ Просмотр истории заказов

**Для администраторов:**
- ✓ Управление товарами (добавление, редактирование, удаление)
- ✓ Управление категориями
- ✓ Просмотр и управление заказами
- ✓ Просмотр статистики (популярные товары, продажи)

#### **2.3. Требования к интерфейсу**

Использование библиотеки `rich` для создания:
- Красивых таблиц для отображения данных
- Панелей и раскладок
- Интерактивных меню
- Форм ввода данных
- Цветового оформления и стилей

### **3. Рекомендуемая структура проекта**

```
internet_shop/
├── database/
│   ├── __init__.py
│   ├── connection.py      # управление подключениями
│   ├── schema.sql         # SQL-скрипт создания схемы
│   └── queries.py         # SQL-запросы
├── models/
│   ├── __init__.py
│   ├── customer.py
│   ├── product.py
│   └── order.py
├── services/
│   ├── __init__.py
│   ├── customer_service.py
│   ├── product_service.py
│   └── order_service.py
├── ui/
│   ├── __init__.py
│   ├── components/        # reusable UI components
│   ├── customer_ui.py
│   ├── product_ui.py
│   └── order_ui.py
├── utils/
│   └── helpers.py
├── main.py
└── requirements.txt
```

### **5. Примеры реализации**

#### **Подключение к БД (database/connection.py)**
```python
from contextlib import contextmanager

class DatabaseConnection:
    def __init__(self, connection_string):
        self.connection_string = connection_string
    
    @contextmanager
    def get_connection(self):
        connection = mssql_python.connect(self.connection_string)
        try:
            yield connection
        except Exception as e:
            connection.rollback()
            raise e
        finally:
            connection.close()
```

#### **Пример UI с rich (ui/components/tables.py)**
```python
from rich.console import Console
from rich.table import Table
from rich.prompt import Prompt, Confirm

console = Console()

def display_products_table(products):
    table = Table(title="Каталог товаров", show_header=True, header_style="bold magenta")
    table.add_column("ID", style="dim")
    table.add_column("Название")
    table.add_column("Цена")
    table.add_column("В наличии")
    table.add_column("Категория")
    
    for product in products:
        table.add_row(
            str(product['product_id']),
            product['product_name'],
            f"{product['price']} руб.",
            str(product['stock_quantity']),
            product['category_name']
        )
    
    console.print(table)
```

---

### **6. Дополнительные задания (по желанию)**

1. **Система скидок и промокодов**
2. **Отзывы и рейтинги товаров**
3. **Сложные отчеты и аналитика**
4. **Кэширование часто запрашиваемых данных**
5. **Резервное копирование базы данных**
